<!-- usuarios.component.html -->
<div class="usuarios-container">
  <!-- Header Section -->
  <div class="usuarios-header">
    <h2>
      <i class="fas fa-users-cog icon"></i>
      Gestión de Usuarios
    </h2>

    <div class="usuarios-actions">
      <button class="usuarios-btn-primary">
        <i class="fas fa-user-plus"></i>
        Nuevo Usuario
      </button>
    </div>
  </div>

  <!-- User Filters -->
  <div class="usuarios-filters">
    <div class="filter-group">
      <label for="searchUser">
        <i class="fas fa-search"></i>
        Buscar Usuario
      </label>
      <input type="text" id="searchUser" placeholder="Nombre, email o rol..." [(ngModel)]="searchText">
    </div>

    <div class="filter-group">
      <label for="userRole">
        <i class="fas fa-user-tag"></i>
        Filtro por Rol
      </label>
      <select id="userRole" [(ngModel)]="selectedRole">
        <option value="">Todos</option>
        <option value="admin">Administrador</option>
        <option value="editor">Editor</option>
        <option value="viewer">Visualizador</option>
      </select>
    </div>

    <button class="usuarios-btn-secondary">
      <i class="fas fa-sync-alt"></i>
      Actualizar Lista
    </button>
  </div>

  <!-- Users Table -->
  <div class="usuarios-table-container">
    <table class="usuarios-table">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Email</th>
          <th>Rol</th>
          <th>Estado</th>
          <th>Último Acceso</th>
          <th>Acciones</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let user of filteredUsers">
          <td>
            <div class="user-info">
              <div class="user-avatar">
                {{ user.name | slice:0:1 }}
              </div>
              <span>{{ user.name }}</span>
            </div>
          </td>
          <td>{{ user.email }}</td>
          <td>
            <span class="user-role" [class]="getRoleClass(user.role)">
              {{ user.role }}
            </span>
          </td>
          <td>
            <span class="user-status" [class]="user.status">
              <i class="fas fa-circle"></i>
              {{ user.status === 'active' ? 'Activo' : 'Inactivo' }}
            </span>
          </td>
          <td>{{ user.lastAccess | date: 'dd/MM/yyyy HH:mm' }}</td>
          <td class="user-actions">
            <button class="usuarios-btn-icon">
              <i class="fas fa-edit"></i>
            </button>
            <button class="usuarios-btn-icon danger">
              <i class="fas fa-trash-alt"></i>
            </button>
            <button class="usuarios-btn-icon info">
              <i class="fas fa-key"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- User Modal -->
  <div class="user-modal" *ngIf="showModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>{{ editingUser ? 'Editar Usuario' : 'Nuevo Usuario' }}</h3>
        <button class="modal-close" (click)="closeModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="modal-body">
        <form>
          <div class="form-group">
            <label for="userName">Nombre Completo</label>
            <input type="text" id="userName" [(ngModel)]="currentUser.name">
          </div>

          <div class="form-group">
            <label for="userEmail">Email</label>
            <input type="email" id="userEmail" [(ngModel)]="currentUser.email">
          </div>

          <div class="form-group">
            <label for="userRole">Rol</label>
            <select id="userRole" [(ngModel)]="currentUser.role">
              <option value="admin">Administrador</option>
              <option value="editor">Editor</option>
              <option value="viewer">Visualizador</option>
            </select>
          </div>

          <div class="form-group">
            <label>Estado</label>
            <div class="status-toggle">
              <button [class.active]="currentUser.status === 'active'" (click)="currentUser.status = 'active'">
                Activo
              </button>
              <button [class.active]="currentUser.status === 'inactive'" (click)="currentUser.status = 'inactive'">
                Inactivo
              </button>
            </div>
          </div>
        </form>
      </div>

      <div class="modal-footer">
        <button class="usuarios-btn-secondary" (click)="closeModal()">
          Cancelar
        </button>
        <button class="usuarios-btn-primary">
          {{ editingUser ? 'Actualizar' : 'Crear' }}
        </button>
      </div>
    </div>
  </div>
</div>